{% extends 'students/base.html' %}

{% block content %}

<style>
/* Page Wrapper */
.page-wrapper {
    background: linear-gradient(135deg, #4e73df, #36b9cc);
    border-radius: 18px;
    padding: 30px;
}

/* Card */
.page-card {
    background: #ffffff;
    border-radius: 14px;
    padding: 25px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
}

/* Header */
.page-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    border-bottom: 1px solid #e5e7eb;
    padding-bottom: 10px;
}

.page-header h2 {
    font-weight: 700;
    color: #1f2937;
    margin: 0;
}

/* Search input */
.search-input {
    width: 250px;
    padding: 6px 12px;
    border-radius: 5px;
    border: 1px solid #d1d5db;
}

/* Table Styling */
table {
    width: 100%;
    border-collapse: collapse;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: #2e3e5c;
}

/* Table Head */
thead th {
    background: linear-gradient(135deg, #4e73df, #1cc88a);
    color: #fff;
    font-weight: 600;
    text-align: center;
    padding: 12px;
}

/* Table Body */
tbody td {
    padding: 12px;
    text-align: center;
    border-bottom: 1px solid #e3e6f0;
}

tbody tr:nth-child(even) {
    background-color: #f8f9fc;
}

tbody tr:hover {
    background-color: #e2f7f1;
}

/* ICON ONLY ACTIONS */
.action-icons {
    display: flex;
    justify-content: center;
    gap: 12px;
    font-size: 16px;
}

.action-icons a {
    color: #6c757d;
    transition: 0.2s ease;
}

.action-icons a:hover {
    color: #1f2937;
}

/* Specific hover colors */
.action-icons .edit:hover {
    color: #4e73df;
}

.action-icons .delete:hover {
    color: #e74a3b;
}
</style>

<div class="container mt-5">
    <div class="page-wrapper">
        <div class="page-card">

            <!-- Header -->
            <div class="page-header">
                <h2>ðŸ“‹ Students</h2>
                <input type="text" id="studentSearchInput" class="search-input" placeholder="Search...">
            </div>

            <!-- Table -->
            {% if students %}
            <div class="table-responsive">
                <table id="studentsTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Course</th>
                            <th>Phone</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for student in students %}
                        <tr>
                            <td>{{ forloop.counter }}</td>
                            <td>{{ student.name }}</td>
                            <td>{{ student.course }}</td>
                            <td>{{ student.phone }}</td>
                            <td>
                                <div class="action-icons">
                                    <a href="{% url 'student_edit' student.id %}" class="edit" title="Edit">
                                        <i class="fa-solid fa-pen-to-square"></i>
                                    </a>
                                    <a href="{% url 'student_delete' student.id %}" class="delete" title="Delete" onclick="return confirm('Are you sure?')">
                                        <i class="fa-solid fa-trash"></i>
                                    </a>
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
                <p class="text-center text-muted mb-0">No students available</p>
            {% endif %}

        </div>
    </div>
</div>

<script>
    // Live search for students
    const studentSearchInput = document.getElementById('studentSearchInput');
    const studentsTable = document.getElementById('studentsTable');
    const studentRows = studentsTable.getElementsByTagName('tr');

    studentSearchInput.addEventListener('keyup', function() {
        const filter = studentSearchInput.value.toLowerCase();
        for (let i = 1; i < studentRows.length; i++) { // skip header row
            const cells = studentRows[i].getElementsByTagName('td');
            let match = false;
            for (let j = 0; j < cells.length; j++) {
                if (cells[j].textContent.toLowerCase().includes(filter)) {
                    match = true;
                    break;
                }
            }
            studentRows[i].style.display = match ? '' : 'none';
        }
    });
</script>

{% endblock %}
